{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/yorukot/Documents/code/SITCON-CAMP-AIchallenge/history/src/app/api/history/%5Bteam%5D/%5Bchall%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { MongoClient } from 'mongodb'\n\nexport async function GET(\n    request: NextRequest,\n    { params }: { params: Promise<{ team: string; chall: string }> }\n) {\n    try {\n        const mongodb_url = process.env.MONGODB\n        if (!mongodb_url) {\n            console.error('MONGODB 環境變數未設置')\n            return NextResponse.json(\n                { error: '服務器配置錯誤' },\n                { status: 500 }\n            )\n        }\n\n        const { team, chall } = await params\n\n        // 驗證參數\n        const teamId = parseInt(team)\n        if (isNaN(teamId) || teamId < 1 || teamId > 10) {\n            return NextResponse.json(\n                { error: '無效的團隊編號' },\n                { status: 400 }\n            )\n        }\n\n        // 連接 MongoDB\n        const client = new MongoClient(mongodb_url, {\n            tlsAllowInvalidCertificates: true\n        })\n        await client.connect()\n\n        const db = client.db('sitcon_camp')\n        const collection = db.collection(chall) // 使用 chall 參數作為集合名稱\n\n        // 查詢該團隊的所有記錄，按時間排序\n        const records = await collection\n            .find({ team_id: teamId })\n            .sort({ timestamp: -1 }) // 最新的在前面\n            .toArray()\n\n        await client.close()\n\n        return NextResponse.json(records)\n\n    } catch (error) {\n        console.error('API 錯誤:', error)\n        return NextResponse.json(\n            { error: '服務器錯誤' },\n            { status: 500 }\n        )\n    }\n} "],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,eAAe,IAClB,OAAoB,EACpB,EAAE,MAAM,EAAwD;IAEhE,IAAI;QACA,MAAM,cAAc,QAAQ,GAAG,CAAC,OAAO;QACvC,IAAI,CAAC,aAAa;YACd,QAAQ,KAAK,CAAC;YACd,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAU,GACnB;gBAAE,QAAQ;YAAI;QAEtB;QAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM;QAE9B,OAAO;QACP,MAAM,SAAS,SAAS;QACxB,IAAI,MAAM,WAAW,SAAS,KAAK,SAAS,IAAI;YAC5C,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAU,GACnB;gBAAE,QAAQ;YAAI;QAEtB;QAEA,aAAa;QACb,MAAM,SAAS,IAAI,uGAAA,CAAA,cAAW,CAAC,aAAa;YACxC,6BAA6B;QACjC;QACA,MAAM,OAAO,OAAO;QAEpB,MAAM,KAAK,OAAO,EAAE,CAAC;QACrB,MAAM,aAAa,GAAG,UAAU,CAAC,OAAO,oBAAoB;;QAE5D,mBAAmB;QACnB,MAAM,UAAU,MAAM,WACjB,IAAI,CAAC;YAAE,SAAS;QAAO,GACvB,IAAI,CAAC;YAAE,WAAW,CAAC;QAAE,GAAG,SAAS;SACjC,OAAO;QAEZ,MAAM,OAAO,KAAK;QAElB,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAE7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,WAAW;QACzB,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAQ,GACjB;YAAE,QAAQ;QAAI;IAEtB;AACJ","debugId":null}}]
}